(()=>{"use strict";var __webpack_modules__={558:()=>{eval('\n;// ./src/pubsub.js\nclass PubSub {\n    #events = {};\n\n    on(eventName, fn) {\n        this.#events[eventName] = this.#events[eventName] || [];\n        this.#events[eventName].push(fn);\n    }\n\n    off(eventName, fn) {\n        if (this.#events[eventName]) {\n            for (let i = 0; i < this.#events[eventName].length; i++) {\n                if (this.#events[eventName][i] === fn) {\n                    this.#events[eventName].splice(i, 1);\n                    break;\n                }\n            };\n        };\n    }\n\n    emit(eventName, data) {\n        if (this.#events[eventName]) {\n            this.#events[eventName].forEach((fn) => {\n                fn(data);\n            });\n        }\n    }\n\n    get list() {\n        return this.#events;\n    }\n};\n\nconst Events = new PubSub;\n;// ./src/project.js\n\n\nclass Project {\n    constructor(name) {\n        this.name = name;\n    }\n\n    setAsCurrent() {\n        Projects.current = this.name;\n        Events.emit("updateTasks");\n    }\n}\n\nclass ProjectManager {\n    #projectList = [];\n    #currentProject = "Inbox";\n\n    get list() {\n        return this.#projectList;\n    }\n\n    get current() {\n        return this.#currentProject;\n    }\n\n    set current(project) {\n        this.#currentProject = project;\n        Events.emit("updateProjects");\n        Events.emit("updateTasks");\n    }\n\n    add(name) {\n        this.#projectList.push(new Project(name));\n        Events.emit("updateProjects");\n    }\n\n    delete(project) {\n        this.#projectList = this.list.filter(projects => projects.name != project.name);\n        if (this.current === project.name) {\n            this.current = "Inbox";\n        }\n        Events.emit("updateProjects");\n        Events.emit("updateTasks");\n    }\n}\n\nconst Projects = new ProjectManager;\nEvents.on("updateProjects", () => {localStorage.setItem(\'projects\', JSON.stringify(Projects.list))});\n;// ./src/helper.js\n\n \n\n\nfunction test(code) {\n    console.log(code);\n}\n\nfunction addElement(name, tag, target, className = undefined) {\n    const element = document.createElement(`${tag}`);\n    element.id = name;\n    if (className) element.classList.add(className);\n    appendElement(element, target);\n}\n\nfunction addTextElement(name, tag, target, className = undefined) {\n    const element = document.createElement(`${tag}`);\n    element.textContent = name;\n    element.classList.add(`${className}`);\n    appendElement(element, target);\n}\n\nfunction addButton(name, target, fn, icon) {\n    const element = document.createElement("button");\n    element.textContent = name;\n    element.id = `${camelCase(name)}Btn`;\n    appendElement(element, target);\n    element.addEventListener("click", (e) => {fn(e)});\n    if (icon) {\n        element.innerHTML = `<i class="material-icons">${icon}</i>` + name;\n    }\n}\n\nfunction addIcon(name, target, fn = undefined) {\n    const element = document.createElement("i");\n    element.classList.add("material-icons");\n    element.textContent = name;\n    appendElement(element, target);\n   if (fn) element.addEventListener("click", (e) => {fn(e)});\n}\n\nfunction appendElement(element, target) {\n    if (target === "body") {\n        document.body.appendChild(element);\n    } else {\n        document.getElementById(`${target}`).appendChild(element);\n    }\n}\n\nfunction addCheckbox(task, target) {\n    const element = document.createElement("div");\n    element.id = task.name;\n    element.name = task.name;\n    element.classList.add(\'checkbox\');\n    document.getElementById(`${target}`).appendChild(element);\n    element.addEventListener("click", () => {\n        (task.completed) ? task.completed = false : task.completed = true;\n        Events.emit("updateTasks");\n    });\n}\n\nfunction deleteElementsFrom(target) {\n    document.getElementById(target).innerHTML = ``;\n}\n\nfunction camelCase(str) {\n    return str\n        .replace(/\\s(.)/g, function (a) {\n            return a.toUpperCase();\n        })\n        .replace(/\\s/g, \'\')\n        .replace(/^(.)/, function (b) {\n            return b.toLowerCase();\n        });\n}\n\nfunction overdue(date) {\n    if (date === "") return false;\n    let inputDate = new Date(date.replace(/(\\d\\d)\\/(\\d\\d)\\/(\\d{4})/, "$2-$1-$3")).toISOString();\n    let currentDate = new Date(Date.now()).toISOString();\n\n    return inputDate < currentDate;\n}\n\nfunction filterTasks(tasks) {\n    switch (Projects.current) {\n        case "Inbox":\n            return tasks;\n            break;\n        case "Important":\n            return tasks.filter(task => task.priority === true);\n            break;\n        case "Overdue":\n            return tasks.filter(task => overdue(task.date) === true);\n            break;\n        case "Upcoming":\n            return tasks.filter(task => overdue(task.date) === false);\n            break;\n        default:\n            return tasks.filter(task => task.project === Projects.current);\n    }\n}\n\nfunction getDate(date) {\n    let parts = date.split(\'/\');\n    return `${parts[2]}-${parts[1]}-${parts[0]}`;\n}\n;// ./src/dialog.js\n\n\n\n\n\nclass Dialog {\n    constructor(name) {\n        this.name = name;\n        this.reference = document.getElementById(`${name}`);\n        this.answers = {};\n\n        Events.on("updateProjects", this.populate);\n        \n        if (name === "toDoDialog") {\n            let closeBtn = document.getElementById("closeBtn");\n            closeBtn.addEventListener("click", () => {\n                document.querySelector(`form input[type="text"]`).classList.remove(\'invalid\');\n                this.close();\n            });\n\n            let confirmBtn = document.getElementById("confirmBtn");\n            confirmBtn.addEventListener("click", (e) => {\n                e.preventDefault();\n\n                [...document.querySelector(`#${name} form`).children].forEach(element => {\n                    if (element.name) {\n                        this.answers[element.name] = element.value;\n                    }\n                });\n                this.answers.date = (this.answers.date) ? new Date(this.answers.date).toLocaleDateString() : "";\n                \n                if (document.getElementById("dialogTitle").innerHTML === \'Add Task\' && this.answers.name) {\n                    Tasks.add(`${this.answers.name}`,`${this.answers.description}`, `${this.answers.project}`, `${this.answers.date}`);\n                    this.close();\n                } else if (document.getElementById("dialogTitle").innerHTML === \'Edit Task\') {\n                    this.close();\n                } else {\n                    document.querySelector(`form input[type="text"]`).classList.add(\'invalid\');\n                }\n            });\n        } else if (name === "projectDialog") {\n            let projectCloseBtn = document.getElementById("projectCloseBtn");\n            projectCloseBtn.addEventListener("click", () => {\n                document.querySelector(`form input[type="text"]#projectName`).classList.add(\'invalid\');\n                this.close();\n            });\n    \n            let projectConfirmBtn = document.getElementById("projectConfirmBtn");\n            projectConfirmBtn.addEventListener("click", (e) => {\n                e.preventDefault();\n                [...document.querySelector(`#projectDialog form`).children].forEach(element => {\n                    if (element.name && element.value) {\n                        Projects.add(element.value);\n                        Projects.current = element.value;\n                        this.close();\n                    } else {\n                        document.querySelector(`form input[type="text"]#projectName`).classList.add(\'invalid\');\n                    }\n                });\n            });\n        }};\n    \n    open() {\n        document.querySelector(`form input[type="text"]`).classList.remove(\'invalid\');\n        document.querySelector(`form input[type="text"]#projectName`).classList.remove(\'invalid\');\n        document.getElementById("dialogTitle").innerHTML = \'Add Task\';\n        this.reference.showModal();\n    }\n\n    close() {\n        this.reference.close();\n        this.clear();\n    }\n\n    clear() {\n        [...document.querySelector(`#${this.name} form`).children].forEach(element => {\n            switch(element.name) {\n                case \'name\':\n                case \'description\':\n                case \'date\':\n                    element.value = \'\';\n                    break;\n                case \'project\':\n                    element.value = \'Home\';\n                    break;\n            }\n        });\n    }\n\n    get source() {\n        return this.reference;\n    }\n\n    async edit(fields) {\n        this.open();\n        document.getElementById("dialogTitle").innerHTML = \'Edit Task\';\n        [...document.querySelector(`#${this.name} form`).children].forEach(element => {\n            if (element.name in fields) {\n                if (element.name == \'date\') {\n                    element.value = getDate(fields.date);\n                } else { \n                    element.value = fields[element.name];\n                }\n            }\n        });\n\n        await new Promise(resolve => {\n            document.getElementById("confirmBtn").addEventListener(\'click\', () => {\n              resolve();\n            }, { once: true });\n        });\n\n        return this.answers;\n    }\n\n    populate() {\n        let options = document.getElementById("project");\n        options.innerHTML = \'\';\n        let projects = Projects.list;\n        for (let i = 4; i < projects.length; i++) {\n            const element = document.createElement("option");\n            element.value = projects[i].name;\n            element.innerHTML = projects[i].name;\n            options.appendChild(element);\n        }\n    }\n}\n\nconst TaskDialog = new Dialog("toDoDialog");\nconst ProjectDialog = new Dialog("projectDialog");\n;// ./src/task.js\n\n\n\n\n\nclass Task {\n    constructor(name, description, project, date = undefined, completed = false, priority = false) {\n        this.name = name;\n        this.description = description;\n        this.project = project;\n        this.date = date;\n        this.completed = completed;\n        this.priority = priority;\n    }\n\n    favourite() {\n        this.priority = (this.priority) ? false : true;\n        Events.emit("updateTasks");\n    }\n\n    async edit() {\n        let fields = await TaskDialog.edit({name: this.name, description: this.description, project: this.project, date: this.date});\n        this.name = fields.name;\n        this.description = fields.description;\n        this.project = fields.project;\n        this.date = fields.date;\n        Events.emit("updateTasks");\n    }\n}\n\nclass List {\n    #listItems = [];\n\n    get list() {\n        return this.#listItems;\n    }\n\n    add(name, description, project, date, completed, priority) {\n        this.#listItems.push(new Task(name, description, project, date, completed, priority));\n        Events.emit("updateTasks");\n    }\n\n    delete(task) {\n        this.#listItems = this.list.filter(tasks => tasks.name != task.name);\n        Events.emit("updateTasks");\n    }\n}\n\nconst Tasks = new List;\nEvents.on("updateTasks", () => {localStorage.setItem(\'tasks\', JSON.stringify(Tasks.list))});\n;// ./src/render.js\n\n\n\n\n\n\nclass Renderer {\n    projectTitle;\n    constructor() {\n        Events.on("updateTasks", this.renderTasks);\n        Events.on("updateProjects", this.renderProjects);\n\n        addElement("content", "div", "body");\n        addElement("header", "header", "content");\n        addElement("sidebar", "nav", "content");\n        addElement("main", "main", "content");\n        addElement("mainContainer", "mainContainer", "main");\n        addElement("footer", "footer", "content");\n\n        addIcon("done_all", "header");\n        addTextElement("Right Now", "h1", "header", "title");\n        addTextElement(`${Projects.current}`, "h2", "mainContainer", "projectTitle");\n        addElement("projectList", "div", "sidebar");\n        addButton("Add Project", "sidebar", () => {ProjectDialog.open()}, \'add\');\n        addElement("taskList", "div", "mainContainer");\n        addButton("Add Task", "mainContainer", () => {TaskDialog.open()});\n    }\n\n    render() {\n        this.renderProjects();\n        this.renderTasks();\n    }\n\n    renderProjects() {\n        deleteElementsFrom("projectList");\n        let icons = ["inbox", "star", "assignment_late", "watch_later", "format_list_bulleted"];\n        Projects.list.forEach((project, index) => {\n            if (index === 4) addTextElement(\'Projects\', "h2", "projectList", "projects");\n            let icon = (index <= 4) ? icons[index]: icons[4];\n            addButton(`${project.name}`, "projectList", () => {\n                project.setAsCurrent();\n                [...document.querySelector("#projectList").children].forEach(project => {\n                    project.classList.remove("active");\n                });\n                let current = document.querySelector(`#${camelCase(Projects.current)}Btn`);\n                console.log(Projects.current);\n                if (current) {\n                    document.querySelector(`#${camelCase(Projects.current)}Btn`).classList.add("active");\n                } else {\n                    document.querySelector(`#inboxBtn`).classList.add("active");\n                    Projects.current = \'Inbox\';\n                }\n            }, icon);\n            if (index > 3) addIcon("close", `${camelCase(project.name)}Btn`, () => {Projects.delete(project)});\n        });\n\n        [...document.querySelector("#projectList").children].forEach(project => {\n            project.classList.remove("active");\n        });\n        let current = document.querySelector(`#${camelCase(Projects.current)}Btn`);\n        if (current) {\n            document.querySelector(`#${camelCase(Projects.current)}Btn`).classList.add("active");\n        }\n    }\n\n    renderTasks() {\n        document.querySelector(".projectTitle").textContent = `${Projects.current}`;\n\n        deleteElementsFrom("taskList");\n        let currentTasks = filterTasks(Tasks.list);\n        currentTasks.forEach((task, index) => {\n            let taskContainer = `task${index + 1}`;\n            addElement(taskContainer, "div", "taskList", "task");\n\n            addCheckbox(task, taskContainer);\n            addTextElement(task.name, "p", taskContainer, "name");\n            addTextElement(task.description, "p", taskContainer, "description");\n            addTextElement(task.date, "p", taskContainer, "date");\n            addElement("divider", "div", "taskList", "divider");\n\n            let star = (task.priority) ? "star" : "star_outline";\n            addIcon(star, taskContainer, (e) => {task.favourite()});\n            addIcon("edit", taskContainer, () => {task.edit()});\n            addIcon("close", taskContainer, () => {Tasks.delete(task)});\n\n            let elements = [...document.getElementById(`${taskContainer}`).children];\n\n            if (task.completed) {\n                elements.forEach(element => element.classList.add("completed"));\n            } else {\n                elements.forEach(element => element.classList.remove("completed"));\n            }\n\n            if (overdue(task.date)) {\n                elements[3].classList.add("overdue");\n            } else {\n                elements[3].classList.remove("overdue");\n            }\n        })\n    }\n}\n\nconst Screen = new Renderer;\n;// ./src/index.js\n\n\n\n\n\n\n\n\nScreen.render();\n\nlet defaultTasks = [\n    ["Dinner", "Prepare chicken and marinade", "Home", "11/12/2024"],\n    ["Walk", "Take a stroll with the dog", "Home", "06/03/2025"],\n    ["Meeting", "Write up meeting minutes from yesterday", "Work", "14/04/2025"],\n    ["Clean", "Tidy up the living room", "Home", "30/11/2024"],\n    ["Dishes", "Wash up dishes", "Home", "03/11/2025"],\n    ["Slides", "Present competitive research analysis", "Work", "16/10/2026"],\n    ["Email", "Reply to email regarding open tickets", "Work", "22/07/2025"],\n    ["Thesis", "Draft body structure and main arguments", "Study", "01/05/2026"],\n    ["Revise", "Read Chapter 4-6 and prepare notes", "Study", "28/01/2025"],\n    ["Repair", "Buy a new bulb to fix the ceiling light", "Home", "06/06/2025"],\n    ["Report", "Submit financial report to HR", "Work", "15/10/2025"],\n    ["Essay", "Edit conclusion and add references", "Study", "12/04/2025"],\n    ["Homework", "Complete exercise problems", "Home", "02/12/2026"],\n    ["Finals", "Finish practice paper 1 & 2", "Study", "09/09/2025"]\n];\nlet tasks = localStorage.getItem(\'tasks\')\ntasks = \'\';\n\nif (tasks && JSON.parse(tasks).length > 1) {\n    JSON.parse(tasks).forEach(task => Tasks.add(task.name, task.description, task.project, task.date, task.completed, task.priority));\n} else {\n    defaultTasks.forEach(task => Tasks.add(task[0], task[1], task[2], task[3]));\n}\n\n\nlet defaultProjects = [ "Inbox", "Important", "Overdue", "Upcoming", "Home", "Work", "Study" ];\nlet projects = localStorage.getItem(\'projects\')\nprojects = \'\';\n\nif (projects && JSON.parse(projects).length > 1) {\n    JSON.parse(projects).forEach(project => Projects.add(project.name));\n} else {\n    defaultProjects.forEach(project => Projects.add(project));\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNUO0FBQ0E7O0FBRU8sNEI7O0FDdEdlO0FBQ3dCO0FBQ0E7QUFDWTtBQUMxQjtBQUNFO0FBQ0E7O0FBRWxDLE1BQU07O0FBRU47QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esc0NBQXNDLEtBQUs7QUFDM0MsRUFBRTtBQUNGLGlDQUFpQyxLQUFLO0FBQ3RDOzs7QUFHQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw0Q0FBNEMsUUFBUTtBQUNwRCxFQUFFO0FBQ0YsdUNBQXVDLFFBQVE7QUFDL0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJwYWNrLy4vc3JjL3B1YnN1Yi5qcz9iYWVlIiwid2VicGFjazovL3dlYnBhY2svLi9zcmMvcHJvamVjdC5qcz9mNTliIiwid2VicGFjazovL3dlYnBhY2svLi9zcmMvaGVscGVyLmpzPzYyNzUiLCJ3ZWJwYWNrOi8vd2VicGFjay8uL3NyYy9kaWFsb2cuanM/NmU4ZiIsIndlYnBhY2s6Ly93ZWJwYWNrLy4vc3JjL3Rhc2suanM/N2MxMSIsIndlYnBhY2s6Ly93ZWJwYWNrLy4vc3JjL3JlbmRlci5qcz8xMWZjIiwid2VicGFjazovL3dlYnBhY2svLi9zcmMvaW5kZXguanM/YjYzNSJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBQdWJTdWIge1xuICAgICNldmVudHMgPSB7fTtcblxuICAgIG9uKGV2ZW50TmFtZSwgZm4pIHtcbiAgICAgICAgdGhpcy4jZXZlbnRzW2V2ZW50TmFtZV0gPSB0aGlzLiNldmVudHNbZXZlbnROYW1lXSB8fCBbXTtcbiAgICAgICAgdGhpcy4jZXZlbnRzW2V2ZW50TmFtZV0ucHVzaChmbik7XG4gICAgfVxuXG4gICAgb2ZmKGV2ZW50TmFtZSwgZm4pIHtcbiAgICAgICAgaWYgKHRoaXMuI2V2ZW50c1tldmVudE5hbWVdKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuI2V2ZW50c1tldmVudE5hbWVdLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuI2V2ZW50c1tldmVudE5hbWVdW2ldID09PSBmbikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiNldmVudHNbZXZlbnROYW1lXS5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZW1pdChldmVudE5hbWUsIGRhdGEpIHtcbiAgICAgICAgaWYgKHRoaXMuI2V2ZW50c1tldmVudE5hbWVdKSB7XG4gICAgICAgICAgICB0aGlzLiNldmVudHNbZXZlbnROYW1lXS5mb3JFYWNoKChmbikgPT4ge1xuICAgICAgICAgICAgICAgIGZuKGRhdGEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXQgbGlzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2V2ZW50cztcbiAgICB9XG59O1xuXG5leHBvcnQgY29uc3QgRXZlbnRzID0gbmV3IFB1YlN1YjsiLCJpbXBvcnQgeyBFdmVudHMgfSBmcm9tIFwiLi9wdWJzdWJcIjtcblxuZXhwb3J0IGNsYXNzIFByb2plY3Qge1xuICAgIGNvbnN0cnVjdG9yKG5hbWUpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB9XG5cbiAgICBzZXRBc0N1cnJlbnQoKSB7XG4gICAgICAgIFByb2plY3RzLmN1cnJlbnQgPSB0aGlzLm5hbWU7XG4gICAgICAgIEV2ZW50cy5lbWl0KFwidXBkYXRlVGFza3NcIik7XG4gICAgfVxufVxuXG5jbGFzcyBQcm9qZWN0TWFuYWdlciB7XG4gICAgI3Byb2plY3RMaXN0ID0gW107XG4gICAgI2N1cnJlbnRQcm9qZWN0ID0gXCJJbmJveFwiO1xuXG4gICAgZ2V0IGxpc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNwcm9qZWN0TGlzdDtcbiAgICB9XG5cbiAgICBnZXQgY3VycmVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2N1cnJlbnRQcm9qZWN0O1xuICAgIH1cblxuICAgIHNldCBjdXJyZW50KHByb2plY3QpIHtcbiAgICAgICAgdGhpcy4jY3VycmVudFByb2plY3QgPSBwcm9qZWN0O1xuICAgICAgICBFdmVudHMuZW1pdChcInVwZGF0ZVByb2plY3RzXCIpO1xuICAgICAgICBFdmVudHMuZW1pdChcInVwZGF0ZVRhc2tzXCIpO1xuICAgIH1cblxuICAgIGFkZChuYW1lKSB7XG4gICAgICAgIHRoaXMuI3Byb2plY3RMaXN0LnB1c2gobmV3IFByb2plY3QobmFtZSkpO1xuICAgICAgICBFdmVudHMuZW1pdChcInVwZGF0ZVByb2plY3RzXCIpO1xuICAgIH1cblxuICAgIGRlbGV0ZShwcm9qZWN0KSB7XG4gICAgICAgIHRoaXMuI3Byb2plY3RMaXN0ID0gdGhpcy5saXN0LmZpbHRlcihwcm9qZWN0cyA9PiBwcm9qZWN0cy5uYW1lICE9IHByb2plY3QubmFtZSk7XG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnQgPT09IHByb2plY3QubmFtZSkge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50ID0gXCJJbmJveFwiO1xuICAgICAgICB9XG4gICAgICAgIEV2ZW50cy5lbWl0KFwidXBkYXRlUHJvamVjdHNcIik7XG4gICAgICAgIEV2ZW50cy5lbWl0KFwidXBkYXRlVGFza3NcIik7XG4gICAgfVxufVxuXG5leHBvcnQgY29uc3QgUHJvamVjdHMgPSBuZXcgUHJvamVjdE1hbmFnZXI7XG5FdmVudHMub24oXCJ1cGRhdGVQcm9qZWN0c1wiLCAoKSA9PiB7bG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Byb2plY3RzJywgSlNPTi5zdHJpbmdpZnkoUHJvamVjdHMubGlzdCkpfSk7IiwiaW1wb3J0IHsgRXZlbnRzIH0gZnJvbSBcIi4vcHVic3ViXCI7XG5pbXBvcnQgeyBQcm9qZWN0cyB9IGZyb20gXCIuL3Byb2plY3RcIjsgXG5pbXBvcnQgeyBhZGQgfSBmcm9tIFwiZGF0ZS1mbnNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHRlc3QoY29kZSkge1xuICAgIGNvbnNvbGUubG9nKGNvZGUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkRWxlbWVudChuYW1lLCB0YWcsIHRhcmdldCwgY2xhc3NOYW1lID0gdW5kZWZpbmVkKSB7XG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYCR7dGFnfWApO1xuICAgIGVsZW1lbnQuaWQgPSBuYW1lO1xuICAgIGlmIChjbGFzc05hbWUpIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuICAgIGFwcGVuZEVsZW1lbnQoZWxlbWVudCwgdGFyZ2V0KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZFRleHRFbGVtZW50KG5hbWUsIHRhZywgdGFyZ2V0LCBjbGFzc05hbWUgPSB1bmRlZmluZWQpIHtcbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChgJHt0YWd9YCk7XG4gICAgZWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKGAke2NsYXNzTmFtZX1gKTtcbiAgICBhcHBlbmRFbGVtZW50KGVsZW1lbnQsIHRhcmdldCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRCdXR0b24obmFtZSwgdGFyZ2V0LCBmbiwgaWNvbikge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgIGVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIGVsZW1lbnQuaWQgPSBgJHtjYW1lbENhc2UobmFtZSl9QnRuYDtcbiAgICBhcHBlbmRFbGVtZW50KGVsZW1lbnQsIHRhcmdldCk7XG4gICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtmbihlKX0pO1xuICAgIGlmIChpY29uKSB7XG4gICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gYDxpIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnNcIj4ke2ljb259PC9pPmAgKyBuYW1lO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZEljb24obmFtZSwgdGFyZ2V0LCBmbiA9IHVuZGVmaW5lZCkge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaVwiKTtcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtYXRlcmlhbC1pY29uc1wiKTtcbiAgICBlbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcbiAgICBhcHBlbmRFbGVtZW50KGVsZW1lbnQsIHRhcmdldCk7XG4gICBpZiAoZm4pIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7Zm4oZSl9KTtcbn1cblxuZnVuY3Rpb24gYXBwZW5kRWxlbWVudChlbGVtZW50LCB0YXJnZXQpIHtcbiAgICBpZiAodGFyZ2V0ID09PSBcImJvZHlcIikge1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGAke3RhcmdldH1gKS5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRDaGVja2JveCh0YXNrLCB0YXJnZXQpIHtcbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBlbGVtZW50LmlkID0gdGFzay5uYW1lO1xuICAgIGVsZW1lbnQubmFtZSA9IHRhc2submFtZTtcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2NoZWNrYm94Jyk7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7dGFyZ2V0fWApLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgKHRhc2suY29tcGxldGVkKSA/IHRhc2suY29tcGxldGVkID0gZmFsc2UgOiB0YXNrLmNvbXBsZXRlZCA9IHRydWU7XG4gICAgICAgIEV2ZW50cy5lbWl0KFwidXBkYXRlVGFza3NcIik7XG4gICAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVFbGVtZW50c0Zyb20odGFyZ2V0KSB7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFyZ2V0KS5pbm5lckhUTUwgPSBgYDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNhbWVsQ2FzZShzdHIpIHtcbiAgICByZXR1cm4gc3RyXG4gICAgICAgIC5yZXBsYWNlKC9cXHMoLikvZywgZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgIHJldHVybiBhLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5yZXBsYWNlKC9cXHMvZywgJycpXG4gICAgICAgIC5yZXBsYWNlKC9eKC4pLywgZnVuY3Rpb24gKGIpIHtcbiAgICAgICAgICAgIHJldHVybiBiLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gb3ZlcmR1ZShkYXRlKSB7XG4gICAgaWYgKGRhdGUgPT09IFwiXCIpIHJldHVybiBmYWxzZTtcbiAgICBsZXQgaW5wdXREYXRlID0gbmV3IERhdGUoZGF0ZS5yZXBsYWNlKC8oXFxkXFxkKVxcLyhcXGRcXGQpXFwvKFxcZHs0fSkvLCBcIiQyLSQxLSQzXCIpKS50b0lTT1N0cmluZygpO1xuICAgIGxldCBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKERhdGUubm93KCkpLnRvSVNPU3RyaW5nKCk7XG5cbiAgICByZXR1cm4gaW5wdXREYXRlIDwgY3VycmVudERhdGU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXJUYXNrcyh0YXNrcykge1xuICAgIHN3aXRjaCAoUHJvamVjdHMuY3VycmVudCkge1xuICAgICAgICBjYXNlIFwiSW5ib3hcIjpcbiAgICAgICAgICAgIHJldHVybiB0YXNrcztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiSW1wb3J0YW50XCI6XG4gICAgICAgICAgICByZXR1cm4gdGFza3MuZmlsdGVyKHRhc2sgPT4gdGFzay5wcmlvcml0eSA9PT0gdHJ1ZSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIk92ZXJkdWVcIjpcbiAgICAgICAgICAgIHJldHVybiB0YXNrcy5maWx0ZXIodGFzayA9PiBvdmVyZHVlKHRhc2suZGF0ZSkgPT09IHRydWUpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJVcGNvbWluZ1wiOlxuICAgICAgICAgICAgcmV0dXJuIHRhc2tzLmZpbHRlcih0YXNrID0+IG92ZXJkdWUodGFzay5kYXRlKSA9PT0gZmFsc2UpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gdGFza3MuZmlsdGVyKHRhc2sgPT4gdGFzay5wcm9qZWN0ID09PSBQcm9qZWN0cy5jdXJyZW50KTtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXREYXRlKGRhdGUpIHtcbiAgICBsZXQgcGFydHMgPSBkYXRlLnNwbGl0KCcvJyk7XG4gICAgcmV0dXJuIGAke3BhcnRzWzJdfS0ke3BhcnRzWzFdfS0ke3BhcnRzWzBdfWA7XG59IiwiaW1wb3J0IHsgVGFza3MgfSBmcm9tIFwiLi90YXNrXCI7XG5pbXBvcnQgeyBQcm9qZWN0LCBQcm9qZWN0cyB9IGZyb20gXCIuL3Byb2plY3RcIjtcbmltcG9ydCB7IEV2ZW50cyB9IGZyb20gXCIuL3B1YnN1YlwiO1xuaW1wb3J0IHsgZ2V0RGF0ZSB9IGZyb20gXCIuL2hlbHBlclwiO1xuXG5leHBvcnQgY2xhc3MgRGlhbG9nIHtcbiAgICBjb25zdHJ1Y3RvcihuYW1lKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMucmVmZXJlbmNlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7bmFtZX1gKTtcbiAgICAgICAgdGhpcy5hbnN3ZXJzID0ge307XG5cbiAgICAgICAgRXZlbnRzLm9uKFwidXBkYXRlUHJvamVjdHNcIiwgdGhpcy5wb3B1bGF0ZSk7XG4gICAgICAgIFxuICAgICAgICBpZiAobmFtZSA9PT0gXCJ0b0RvRGlhbG9nXCIpIHtcbiAgICAgICAgICAgIGxldCBjbG9zZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2xvc2VCdG5cIik7XG4gICAgICAgICAgICBjbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYGZvcm0gaW5wdXRbdHlwZT1cInRleHRcIl1gKS5jbGFzc0xpc3QucmVtb3ZlKCdpbnZhbGlkJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGxldCBjb25maXJtQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb25maXJtQnRuXCIpO1xuICAgICAgICAgICAgY29uZmlybUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgICAgICBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7bmFtZX0gZm9ybWApLmNoaWxkcmVuXS5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5uYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFuc3dlcnNbZWxlbWVudC5uYW1lXSA9IGVsZW1lbnQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmFuc3dlcnMuZGF0ZSA9ICh0aGlzLmFuc3dlcnMuZGF0ZSkgPyBuZXcgRGF0ZSh0aGlzLmFuc3dlcnMuZGF0ZSkudG9Mb2NhbGVEYXRlU3RyaW5nKCkgOiBcIlwiO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRpYWxvZ1RpdGxlXCIpLmlubmVySFRNTCA9PT0gJ0FkZCBUYXNrJyAmJiB0aGlzLmFuc3dlcnMubmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBUYXNrcy5hZGQoYCR7dGhpcy5hbnN3ZXJzLm5hbWV9YCxgJHt0aGlzLmFuc3dlcnMuZGVzY3JpcHRpb259YCwgYCR7dGhpcy5hbnN3ZXJzLnByb2plY3R9YCwgYCR7dGhpcy5hbnN3ZXJzLmRhdGV9YCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGlhbG9nVGl0bGVcIikuaW5uZXJIVE1MID09PSAnRWRpdCBUYXNrJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgZm9ybSBpbnB1dFt0eXBlPVwidGV4dFwiXWApLmNsYXNzTGlzdC5hZGQoJ2ludmFsaWQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmIChuYW1lID09PSBcInByb2plY3REaWFsb2dcIikge1xuICAgICAgICAgICAgbGV0IHByb2plY3RDbG9zZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdENsb3NlQnRuXCIpO1xuICAgICAgICAgICAgcHJvamVjdENsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgZm9ybSBpbnB1dFt0eXBlPVwidGV4dFwiXSNwcm9qZWN0TmFtZWApLmNsYXNzTGlzdC5hZGQoJ2ludmFsaWQnKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgICAgIGxldCBwcm9qZWN0Q29uZmlybUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdENvbmZpcm1CdG5cIik7XG4gICAgICAgICAgICBwcm9qZWN0Q29uZmlybUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNwcm9qZWN0RGlhbG9nIGZvcm1gKS5jaGlsZHJlbl0uZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQubmFtZSAmJiBlbGVtZW50LnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBQcm9qZWN0cy5hZGQoZWxlbWVudC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBQcm9qZWN0cy5jdXJyZW50ID0gZWxlbWVudC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYGZvcm0gaW5wdXRbdHlwZT1cInRleHRcIl0jcHJvamVjdE5hbWVgKS5jbGFzc0xpc3QuYWRkKCdpbnZhbGlkJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9fTtcbiAgICBcbiAgICBvcGVuKCkge1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBmb3JtIGlucHV0W3R5cGU9XCJ0ZXh0XCJdYCkuY2xhc3NMaXN0LnJlbW92ZSgnaW52YWxpZCcpO1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBmb3JtIGlucHV0W3R5cGU9XCJ0ZXh0XCJdI3Byb2plY3ROYW1lYCkuY2xhc3NMaXN0LnJlbW92ZSgnaW52YWxpZCcpO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRpYWxvZ1RpdGxlXCIpLmlubmVySFRNTCA9ICdBZGQgVGFzayc7XG4gICAgICAgIHRoaXMucmVmZXJlbmNlLnNob3dNb2RhbCgpO1xuICAgIH1cblxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLnJlZmVyZW5jZS5jbG9zZSgpO1xuICAgICAgICB0aGlzLmNsZWFyKCk7XG4gICAgfVxuXG4gICAgY2xlYXIoKSB7XG4gICAgICAgIFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHt0aGlzLm5hbWV9IGZvcm1gKS5jaGlsZHJlbl0uZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgICAgICAgIHN3aXRjaChlbGVtZW50Lm5hbWUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICduYW1lJzpcbiAgICAgICAgICAgICAgICBjYXNlICdkZXNjcmlwdGlvbic6XG4gICAgICAgICAgICAgICAgY2FzZSAnZGF0ZSc6XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudmFsdWUgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAncHJvamVjdCc6XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudmFsdWUgPSAnSG9tZSc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBnZXQgc291cmNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWZlcmVuY2U7XG4gICAgfVxuXG4gICAgYXN5bmMgZWRpdChmaWVsZHMpIHtcbiAgICAgICAgdGhpcy5vcGVuKCk7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGlhbG9nVGl0bGVcIikuaW5uZXJIVE1MID0gJ0VkaXQgVGFzayc7XG4gICAgICAgIFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHt0aGlzLm5hbWV9IGZvcm1gKS5jaGlsZHJlbl0uZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgICAgICAgIGlmIChlbGVtZW50Lm5hbWUgaW4gZmllbGRzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQubmFtZSA9PSAnZGF0ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC52YWx1ZSA9IGdldERhdGUoZmllbGRzLmRhdGUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7IFxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnZhbHVlID0gZmllbGRzW2VsZW1lbnQubmFtZV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29uZmlybUJ0blwiKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgfSwgeyBvbmNlOiB0cnVlIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gdGhpcy5hbnN3ZXJzO1xuICAgIH1cblxuICAgIHBvcHVsYXRlKCkge1xuICAgICAgICBsZXQgb3B0aW9ucyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdFwiKTtcbiAgICAgICAgb3B0aW9ucy5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgbGV0IHByb2plY3RzID0gUHJvamVjdHMubGlzdDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDQ7IGkgPCBwcm9qZWN0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gICAgICAgICAgICBlbGVtZW50LnZhbHVlID0gcHJvamVjdHNbaV0ubmFtZTtcbiAgICAgICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gcHJvamVjdHNbaV0ubmFtZTtcbiAgICAgICAgICAgIG9wdGlvbnMuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBjb25zdCBUYXNrRGlhbG9nID0gbmV3IERpYWxvZyhcInRvRG9EaWFsb2dcIik7XG5leHBvcnQgY29uc3QgUHJvamVjdERpYWxvZyA9IG5ldyBEaWFsb2coXCJwcm9qZWN0RGlhbG9nXCIpOyIsImltcG9ydCB7IGNvbnN0cnVjdEZyb20gfSBmcm9tIFwiZGF0ZS1mbnNcIjtcbmltcG9ydCB7IHRlc3QgfSBmcm9tIFwiLi9oZWxwZXJcIjtcbmltcG9ydCB7IEV2ZW50cyB9IGZyb20gXCIuL3B1YnN1YlwiO1xuaW1wb3J0IHsgVGFza0RpYWxvZyB9IGZyb20gXCIuL2RpYWxvZ1wiO1xuXG5leHBvcnQgY2xhc3MgVGFzayB7XG4gICAgY29uc3RydWN0b3IobmFtZSwgZGVzY3JpcHRpb24sIHByb2plY3QsIGRhdGUgPSB1bmRlZmluZWQsIGNvbXBsZXRlZCA9IGZhbHNlLCBwcmlvcml0eSA9IGZhbHNlKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcbiAgICAgICAgdGhpcy5kYXRlID0gZGF0ZTtcbiAgICAgICAgdGhpcy5jb21wbGV0ZWQgPSBjb21wbGV0ZWQ7XG4gICAgICAgIHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eTtcbiAgICB9XG5cbiAgICBmYXZvdXJpdGUoKSB7XG4gICAgICAgIHRoaXMucHJpb3JpdHkgPSAodGhpcy5wcmlvcml0eSkgPyBmYWxzZSA6IHRydWU7XG4gICAgICAgIEV2ZW50cy5lbWl0KFwidXBkYXRlVGFza3NcIik7XG4gICAgfVxuXG4gICAgYXN5bmMgZWRpdCgpIHtcbiAgICAgICAgbGV0IGZpZWxkcyA9IGF3YWl0IFRhc2tEaWFsb2cuZWRpdCh7bmFtZTogdGhpcy5uYW1lLCBkZXNjcmlwdGlvbjogdGhpcy5kZXNjcmlwdGlvbiwgcHJvamVjdDogdGhpcy5wcm9qZWN0LCBkYXRlOiB0aGlzLmRhdGV9KTtcbiAgICAgICAgdGhpcy5uYW1lID0gZmllbGRzLm5hbWU7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBmaWVsZHMuZGVzY3JpcHRpb247XG4gICAgICAgIHRoaXMucHJvamVjdCA9IGZpZWxkcy5wcm9qZWN0O1xuICAgICAgICB0aGlzLmRhdGUgPSBmaWVsZHMuZGF0ZTtcbiAgICAgICAgRXZlbnRzLmVtaXQoXCJ1cGRhdGVUYXNrc1wiKTtcbiAgICB9XG59XG5cbmNsYXNzIExpc3Qge1xuICAgICNsaXN0SXRlbXMgPSBbXTtcblxuICAgIGdldCBsaXN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jbGlzdEl0ZW1zO1xuICAgIH1cblxuICAgIGFkZChuYW1lLCBkZXNjcmlwdGlvbiwgcHJvamVjdCwgZGF0ZSwgY29tcGxldGVkLCBwcmlvcml0eSkge1xuICAgICAgICB0aGlzLiNsaXN0SXRlbXMucHVzaChuZXcgVGFzayhuYW1lLCBkZXNjcmlwdGlvbiwgcHJvamVjdCwgZGF0ZSwgY29tcGxldGVkLCBwcmlvcml0eSkpO1xuICAgICAgICBFdmVudHMuZW1pdChcInVwZGF0ZVRhc2tzXCIpO1xuICAgIH1cblxuICAgIGRlbGV0ZSh0YXNrKSB7XG4gICAgICAgIHRoaXMuI2xpc3RJdGVtcyA9IHRoaXMubGlzdC5maWx0ZXIodGFza3MgPT4gdGFza3MubmFtZSAhPSB0YXNrLm5hbWUpO1xuICAgICAgICBFdmVudHMuZW1pdChcInVwZGF0ZVRhc2tzXCIpO1xuICAgIH1cbn1cblxuZXhwb3J0IGNvbnN0IFRhc2tzID0gbmV3IExpc3Q7XG5FdmVudHMub24oXCJ1cGRhdGVUYXNrc1wiLCAoKSA9PiB7bG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rhc2tzJywgSlNPTi5zdHJpbmdpZnkoVGFza3MubGlzdCkpfSk7IiwiaW1wb3J0IHsgRXZlbnRzIH0gZnJvbSBcIi4vcHVic3ViXCI7XG5pbXBvcnQgeyB0ZXN0LCBhZGRFbGVtZW50LCBhZGRUZXh0RWxlbWVudCwgYWRkQnV0dG9uLCBkZWxldGVFbGVtZW50c0Zyb20sIGNhbWVsQ2FzZSwgYWRkQ2hlY2tib3gsIG92ZXJkdWUsIGZpbHRlclRhc2tzLCBhZGRJY29uIH0gZnJvbSBcIi4vaGVscGVyXCI7XG5pbXBvcnQgeyBUYXNrcyB9IGZyb20gXCIuL3Rhc2tcIjtcbmltcG9ydCB7IFByb2plY3QsIFByb2plY3RzIH0gZnJvbSBcIi4vcHJvamVjdFwiO1xuaW1wb3J0IHsgVGFza0RpYWxvZywgUHJvamVjdERpYWxvZyB9IGZyb20gXCIuL2RpYWxvZ1wiO1xuXG5jbGFzcyBSZW5kZXJlciB7XG4gICAgcHJvamVjdFRpdGxlO1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBFdmVudHMub24oXCJ1cGRhdGVUYXNrc1wiLCB0aGlzLnJlbmRlclRhc2tzKTtcbiAgICAgICAgRXZlbnRzLm9uKFwidXBkYXRlUHJvamVjdHNcIiwgdGhpcy5yZW5kZXJQcm9qZWN0cyk7XG5cbiAgICAgICAgYWRkRWxlbWVudChcImNvbnRlbnRcIiwgXCJkaXZcIiwgXCJib2R5XCIpO1xuICAgICAgICBhZGRFbGVtZW50KFwiaGVhZGVyXCIsIFwiaGVhZGVyXCIsIFwiY29udGVudFwiKTtcbiAgICAgICAgYWRkRWxlbWVudChcInNpZGViYXJcIiwgXCJuYXZcIiwgXCJjb250ZW50XCIpO1xuICAgICAgICBhZGRFbGVtZW50KFwibWFpblwiLCBcIm1haW5cIiwgXCJjb250ZW50XCIpO1xuICAgICAgICBhZGRFbGVtZW50KFwibWFpbkNvbnRhaW5lclwiLCBcIm1haW5Db250YWluZXJcIiwgXCJtYWluXCIpO1xuICAgICAgICBhZGRFbGVtZW50KFwiZm9vdGVyXCIsIFwiZm9vdGVyXCIsIFwiY29udGVudFwiKTtcblxuICAgICAgICBhZGRJY29uKFwiZG9uZV9hbGxcIiwgXCJoZWFkZXJcIik7XG4gICAgICAgIGFkZFRleHRFbGVtZW50KFwiUmlnaHQgTm93XCIsIFwiaDFcIiwgXCJoZWFkZXJcIiwgXCJ0aXRsZVwiKTtcbiAgICAgICAgYWRkVGV4dEVsZW1lbnQoYCR7UHJvamVjdHMuY3VycmVudH1gLCBcImgyXCIsIFwibWFpbkNvbnRhaW5lclwiLCBcInByb2plY3RUaXRsZVwiKTtcbiAgICAgICAgYWRkRWxlbWVudChcInByb2plY3RMaXN0XCIsIFwiZGl2XCIsIFwic2lkZWJhclwiKTtcbiAgICAgICAgYWRkQnV0dG9uKFwiQWRkIFByb2plY3RcIiwgXCJzaWRlYmFyXCIsICgpID0+IHtQcm9qZWN0RGlhbG9nLm9wZW4oKX0sICdhZGQnKTtcbiAgICAgICAgYWRkRWxlbWVudChcInRhc2tMaXN0XCIsIFwiZGl2XCIsIFwibWFpbkNvbnRhaW5lclwiKTtcbiAgICAgICAgYWRkQnV0dG9uKFwiQWRkIFRhc2tcIiwgXCJtYWluQ29udGFpbmVyXCIsICgpID0+IHtUYXNrRGlhbG9nLm9wZW4oKX0pO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9qZWN0cygpO1xuICAgICAgICB0aGlzLnJlbmRlclRhc2tzKCk7XG4gICAgfVxuXG4gICAgcmVuZGVyUHJvamVjdHMoKSB7XG4gICAgICAgIGRlbGV0ZUVsZW1lbnRzRnJvbShcInByb2plY3RMaXN0XCIpO1xuICAgICAgICBsZXQgaWNvbnMgPSBbXCJpbmJveFwiLCBcInN0YXJcIiwgXCJhc3NpZ25tZW50X2xhdGVcIiwgXCJ3YXRjaF9sYXRlclwiLCBcImZvcm1hdF9saXN0X2J1bGxldGVkXCJdO1xuICAgICAgICBQcm9qZWN0cy5saXN0LmZvckVhY2goKHByb2plY3QsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBpZiAoaW5kZXggPT09IDQpIGFkZFRleHRFbGVtZW50KCdQcm9qZWN0cycsIFwiaDJcIiwgXCJwcm9qZWN0TGlzdFwiLCBcInByb2plY3RzXCIpO1xuICAgICAgICAgICAgbGV0IGljb24gPSAoaW5kZXggPD0gNCkgPyBpY29uc1tpbmRleF06IGljb25zWzRdO1xuICAgICAgICAgICAgYWRkQnV0dG9uKGAke3Byb2plY3QubmFtZX1gLCBcInByb2plY3RMaXN0XCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICBwcm9qZWN0LnNldEFzQ3VycmVudCgpO1xuICAgICAgICAgICAgICAgIFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2plY3RMaXN0XCIpLmNoaWxkcmVuXS5mb3JFYWNoKHByb2plY3QgPT4ge1xuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0LmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgbGV0IGN1cnJlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHtjYW1lbENhc2UoUHJvamVjdHMuY3VycmVudCl9QnRuYCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coUHJvamVjdHMuY3VycmVudCk7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7Y2FtZWxDYXNlKFByb2plY3RzLmN1cnJlbnQpfUJ0bmApLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI2luYm94QnRuYCkuY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgUHJvamVjdHMuY3VycmVudCA9ICdJbmJveCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgaWNvbik7XG4gICAgICAgICAgICBpZiAoaW5kZXggPiAzKSBhZGRJY29uKFwiY2xvc2VcIiwgYCR7Y2FtZWxDYXNlKHByb2plY3QubmFtZSl9QnRuYCwgKCkgPT4ge1Byb2plY3RzLmRlbGV0ZShwcm9qZWN0KX0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9qZWN0TGlzdFwiKS5jaGlsZHJlbl0uZm9yRWFjaChwcm9qZWN0ID0+IHtcbiAgICAgICAgICAgIHByb2plY3QuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCBjdXJyZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7Y2FtZWxDYXNlKFByb2plY3RzLmN1cnJlbnQpfUJ0bmApO1xuICAgICAgICBpZiAoY3VycmVudCkge1xuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7Y2FtZWxDYXNlKFByb2plY3RzLmN1cnJlbnQpfUJ0bmApLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW5kZXJUYXNrcygpIHtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0VGl0bGVcIikudGV4dENvbnRlbnQgPSBgJHtQcm9qZWN0cy5jdXJyZW50fWA7XG5cbiAgICAgICAgZGVsZXRlRWxlbWVudHNGcm9tKFwidGFza0xpc3RcIik7XG4gICAgICAgIGxldCBjdXJyZW50VGFza3MgPSBmaWx0ZXJUYXNrcyhUYXNrcy5saXN0KTtcbiAgICAgICAgY3VycmVudFRhc2tzLmZvckVhY2goKHRhc2ssIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBsZXQgdGFza0NvbnRhaW5lciA9IGB0YXNrJHtpbmRleCArIDF9YDtcbiAgICAgICAgICAgIGFkZEVsZW1lbnQodGFza0NvbnRhaW5lciwgXCJkaXZcIiwgXCJ0YXNrTGlzdFwiLCBcInRhc2tcIik7XG5cbiAgICAgICAgICAgIGFkZENoZWNrYm94KHRhc2ssIHRhc2tDb250YWluZXIpO1xuICAgICAgICAgICAgYWRkVGV4dEVsZW1lbnQodGFzay5uYW1lLCBcInBcIiwgdGFza0NvbnRhaW5lciwgXCJuYW1lXCIpO1xuICAgICAgICAgICAgYWRkVGV4dEVsZW1lbnQodGFzay5kZXNjcmlwdGlvbiwgXCJwXCIsIHRhc2tDb250YWluZXIsIFwiZGVzY3JpcHRpb25cIik7XG4gICAgICAgICAgICBhZGRUZXh0RWxlbWVudCh0YXNrLmRhdGUsIFwicFwiLCB0YXNrQ29udGFpbmVyLCBcImRhdGVcIik7XG4gICAgICAgICAgICBhZGRFbGVtZW50KFwiZGl2aWRlclwiLCBcImRpdlwiLCBcInRhc2tMaXN0XCIsIFwiZGl2aWRlclwiKTtcblxuICAgICAgICAgICAgbGV0IHN0YXIgPSAodGFzay5wcmlvcml0eSkgPyBcInN0YXJcIiA6IFwic3Rhcl9vdXRsaW5lXCI7XG4gICAgICAgICAgICBhZGRJY29uKHN0YXIsIHRhc2tDb250YWluZXIsIChlKSA9PiB7dGFzay5mYXZvdXJpdGUoKX0pO1xuICAgICAgICAgICAgYWRkSWNvbihcImVkaXRcIiwgdGFza0NvbnRhaW5lciwgKCkgPT4ge3Rhc2suZWRpdCgpfSk7XG4gICAgICAgICAgICBhZGRJY29uKFwiY2xvc2VcIiwgdGFza0NvbnRhaW5lciwgKCkgPT4ge1Rhc2tzLmRlbGV0ZSh0YXNrKX0pO1xuXG4gICAgICAgICAgICBsZXQgZWxlbWVudHMgPSBbLi4uZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7dGFza0NvbnRhaW5lcn1gKS5jaGlsZHJlbl07XG5cbiAgICAgICAgICAgIGlmICh0YXNrLmNvbXBsZXRlZCkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnRzLmZvckVhY2goZWxlbWVudCA9PiBlbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJjb21wbGV0ZWRcIikpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50cy5mb3JFYWNoKGVsZW1lbnQgPT4gZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiY29tcGxldGVkXCIpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG92ZXJkdWUodGFzay5kYXRlKSkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnRzWzNdLmNsYXNzTGlzdC5hZGQoXCJvdmVyZHVlXCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50c1szXS5jbGFzc0xpc3QucmVtb3ZlKFwib3ZlcmR1ZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG59XG5cbmV4cG9ydCBjb25zdCBTY3JlZW4gPSBuZXcgUmVuZGVyZXI7IiwiaW1wb3J0IFwiLi9zdHlsZXMuY3NzXCI7XG5pbXBvcnQgeyBjb21wYXJlQXNjLCBmb3JtYXQgfSBmcm9tIFwiZGF0ZS1mbnNcIjtcbmltcG9ydCB7IFRhc2ssIFRhc2tzLCBhZGRUYXNrIH0gZnJvbSBcIi4vdGFza1wiO1xuaW1wb3J0IHsgUHJvamVjdCwgUHJvamVjdHMsIGFkZFByb2plY3QgfSBmcm9tIFwiLi9wcm9qZWN0XCI7XG5pbXBvcnQgeyB0ZXN0IH0gZnJvbSBcIi4vaGVscGVyXCI7XG5pbXBvcnQgeyBFdmVudHMgfSBmcm9tIFwiLi9wdWJzdWJcIjtcbmltcG9ydCB7IFNjcmVlbiB9IGZyb20gXCIuL3JlbmRlclwiO1xuXG5TY3JlZW4ucmVuZGVyKCk7XG5cbmxldCBkZWZhdWx0VGFza3MgPSBbXG4gICAgW1wiRGlubmVyXCIsIFwiUHJlcGFyZSBjaGlja2VuIGFuZCBtYXJpbmFkZVwiLCBcIkhvbWVcIiwgXCIxMS8xMi8yMDI0XCJdLFxuICAgIFtcIldhbGtcIiwgXCJUYWtlIGEgc3Ryb2xsIHdpdGggdGhlIGRvZ1wiLCBcIkhvbWVcIiwgXCIwNi8wMy8yMDI1XCJdLFxuICAgIFtcIk1lZXRpbmdcIiwgXCJXcml0ZSB1cCBtZWV0aW5nIG1pbnV0ZXMgZnJvbSB5ZXN0ZXJkYXlcIiwgXCJXb3JrXCIsIFwiMTQvMDQvMjAyNVwiXSxcbiAgICBbXCJDbGVhblwiLCBcIlRpZHkgdXAgdGhlIGxpdmluZyByb29tXCIsIFwiSG9tZVwiLCBcIjMwLzExLzIwMjRcIl0sXG4gICAgW1wiRGlzaGVzXCIsIFwiV2FzaCB1cCBkaXNoZXNcIiwgXCJIb21lXCIsIFwiMDMvMTEvMjAyNVwiXSxcbiAgICBbXCJTbGlkZXNcIiwgXCJQcmVzZW50IGNvbXBldGl0aXZlIHJlc2VhcmNoIGFuYWx5c2lzXCIsIFwiV29ya1wiLCBcIjE2LzEwLzIwMjZcIl0sXG4gICAgW1wiRW1haWxcIiwgXCJSZXBseSB0byBlbWFpbCByZWdhcmRpbmcgb3BlbiB0aWNrZXRzXCIsIFwiV29ya1wiLCBcIjIyLzA3LzIwMjVcIl0sXG4gICAgW1wiVGhlc2lzXCIsIFwiRHJhZnQgYm9keSBzdHJ1Y3R1cmUgYW5kIG1haW4gYXJndW1lbnRzXCIsIFwiU3R1ZHlcIiwgXCIwMS8wNS8yMDI2XCJdLFxuICAgIFtcIlJldmlzZVwiLCBcIlJlYWQgQ2hhcHRlciA0LTYgYW5kIHByZXBhcmUgbm90ZXNcIiwgXCJTdHVkeVwiLCBcIjI4LzAxLzIwMjVcIl0sXG4gICAgW1wiUmVwYWlyXCIsIFwiQnV5IGEgbmV3IGJ1bGIgdG8gZml4IHRoZSBjZWlsaW5nIGxpZ2h0XCIsIFwiSG9tZVwiLCBcIjA2LzA2LzIwMjVcIl0sXG4gICAgW1wiUmVwb3J0XCIsIFwiU3VibWl0IGZpbmFuY2lhbCByZXBvcnQgdG8gSFJcIiwgXCJXb3JrXCIsIFwiMTUvMTAvMjAyNVwiXSxcbiAgICBbXCJFc3NheVwiLCBcIkVkaXQgY29uY2x1c2lvbiBhbmQgYWRkIHJlZmVyZW5jZXNcIiwgXCJTdHVkeVwiLCBcIjEyLzA0LzIwMjVcIl0sXG4gICAgW1wiSG9tZXdvcmtcIiwgXCJDb21wbGV0ZSBleGVyY2lzZSBwcm9ibGVtc1wiLCBcIkhvbWVcIiwgXCIwMi8xMi8yMDI2XCJdLFxuICAgIFtcIkZpbmFsc1wiLCBcIkZpbmlzaCBwcmFjdGljZSBwYXBlciAxICYgMlwiLCBcIlN0dWR5XCIsIFwiMDkvMDkvMjAyNVwiXVxuXTtcbmxldCB0YXNrcyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0YXNrcycpXG50YXNrcyA9ICcnO1xuXG5pZiAodGFza3MgJiYgSlNPTi5wYXJzZSh0YXNrcykubGVuZ3RoID4gMSkge1xuICAgIEpTT04ucGFyc2UodGFza3MpLmZvckVhY2godGFzayA9PiBUYXNrcy5hZGQodGFzay5uYW1lLCB0YXNrLmRlc2NyaXB0aW9uLCB0YXNrLnByb2plY3QsIHRhc2suZGF0ZSwgdGFzay5jb21wbGV0ZWQsIHRhc2sucHJpb3JpdHkpKTtcbn0gZWxzZSB7XG4gICAgZGVmYXVsdFRhc2tzLmZvckVhY2godGFzayA9PiBUYXNrcy5hZGQodGFza1swXSwgdGFza1sxXSwgdGFza1syXSwgdGFza1szXSkpO1xufVxuXG5cbmxldCBkZWZhdWx0UHJvamVjdHMgPSBbIFwiSW5ib3hcIiwgXCJJbXBvcnRhbnRcIiwgXCJPdmVyZHVlXCIsIFwiVXBjb21pbmdcIiwgXCJIb21lXCIsIFwiV29ya1wiLCBcIlN0dWR5XCIgXTtcbmxldCBwcm9qZWN0cyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwcm9qZWN0cycpXG5wcm9qZWN0cyA9ICcnO1xuXG5pZiAocHJvamVjdHMgJiYgSlNPTi5wYXJzZShwcm9qZWN0cykubGVuZ3RoID4gMSkge1xuICAgIEpTT04ucGFyc2UocHJvamVjdHMpLmZvckVhY2gocHJvamVjdCA9PiBQcm9qZWN0cy5hZGQocHJvamVjdC5uYW1lKSk7XG59IGVsc2Uge1xuICAgIGRlZmF1bHRQcm9qZWN0cy5mb3JFYWNoKHByb2plY3QgPT4gUHJvamVjdHMuYWRkKHByb2plY3QpKTtcbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///558\n')}},__webpack_exports__={};__webpack_modules__[558]()})();